# {{{ keybinds
# NOTE: default keybinds cheat sheet:
# https://tmuxai.dev/tmux-cheatsheet.pdf

# remapping this is actually good for tmux-on-tmux action (you can choose which tmux to send commands to)
set -g prefix C-space
unbind C-b
bind C-space send-prefix

# disables confirmation
bind x kill-pane

bind v copy-mode
bind -T copy-mode-vi 'v' send -X begin-selection
bind -T copy-mode-vi 'y' send -X copy-selection

# " looks like two panes side by side, and % looks like two panes split vertically (wtf)
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# same as nvim's size leap
bind -r C-Up resize-pane -U 2
bind -r C-Down resize-pane -D 2
bind -r C-Left resize-pane -L 2
bind -r C-Right resize-pane -R 2

# i dont think r does anything by default?
unbind r
bind r source-file ~/.config/tmux/tmux.conf \; display-message "ó°‘“ Config reloaded."

# g doesnt do anything by default (should)
bind g display-popup -d "#{pane_current_path}" -E -w 80% -h 80% -E lazygit
# }}}

# {{{ options
# Start windows and panes at 1, not 0.
set -g base-index 1
setw -g pane-base-index 1
# no more windows 1 and 3 when 2 is deleted
set -g renumber-windows on

# Resolves colour scheme conflicts with nvim.
set -a terminal-features "alacritty:RGB"

set -g mouse on
set -g history-limit 100000

set -g mode-keys vi

# Neovim :checkhealth recommends me to do this.
set -g focus-events on

set -g status-position top

# Load customised Nord theme.
run-shell "~/.config/tmux/nord-custom/nord.tmux"
# }}}

# {{{ plugins
# These two are required by tpm.
set -g @plugin "tmux-plugins/tpm"
set -g @plugin "tmux-plugins/tmux-sensible"

# Auto saves and restores session.
set -g @plugin "tmux-plugins/tmux-resurrect"
set -g @plugin "tmux-plugins/tmux-continuum"
set -g @resurrect-capture-pane-contents "on"
set -g @continuum-restore "on"
set -g @continuum-save-interval "1"

# Yanking on tmux copies to system clipboard.
set -g @plugin "tmux-plugins/tmux-yank"
set -g @yank_action "copy-pipe" # stay in copy mode after yanking

# Initialises plugin manager. (Keep this line at the very bottom of tmux.conf)
run "~/.tmux/plugins/tpm/tpm"
# }}}

# vim: foldmethod=marker foldlevel=0
